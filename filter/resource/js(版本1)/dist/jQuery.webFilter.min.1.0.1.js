function findIndex(a,b){for(var c=a.length-1,d=Math.abs(b-a[0]),e=0,f=0,g=0;c>g;g++)e=Math.abs(b-a[g+1]),d>=e&&(d=e,f=g+1);return f}define("WebFilter/jQuery.webFilter",["./data-processing","./ui-screening","./ui-slider","./data-getKeyWord","./data-ajax","./ui-hoverBgColor","./ui-fixHead","./ui-checkbox","./ui-moreKey","./ui-toggle","./ui-reset"],function(a,b,c){function d(b,c,d){jQuery(document).ready(function(){var e=encodeURI("IsAjax=true&Labels=选型表表头Json&String"),f=d.split(",");$.ajax({async:!0,context:document.body,url:b,data:e,dataType:"text",beforeSend:function(){var a=$('<div id="ZlgLoading1" class="zlg-loading"></div>');$("#ZlgScreenMain").append(a),"隐藏选型表"==c&&$(".zlg-screening").hide()},error:function(){alert("╮(╯﹏╰)╭网络故障,数据请求失败！")},success:function(c){$("#ZlgLoading1").remove();var d=a("./data-processing").initResult(c);a("./ui-screening").ui(d,b,f),a("./ui-toggle").ui();var e=b+"?tName="+d.title.TableName+"&filter=&IsAjax=true&Labels=商品综合信息列表Table";e=encodeURI(e),a("./data-ajax").init(e),a("./ui-reset").init("#ZlgReset",e)}})})}b.init=d}),Array.prototype.unique=function(){for(var a={},b=[],c=0;c<this.length;c++)a[this[c]]||(a[this[c]]=!0,b.push(this[c]));return b},define("WebFilter/data-processing",[],function(require,exports,module){function initResult(Json){Json=Json.replace(/[\n\r]/g,"");var JsonArr=Json.split(";"),JsonArrData=eval("("+JsonArr[0]+")"),JsonArrTitle=eval("("+JsonArr[1]+")"),JsonArrNum=eval("("+JsonArr[2]+")"),JsonArrType=eval("("+JsonArr[3]+")"),JsonArrDataBak=eval("("+JsonArr[0]+")"),JsonTmp=JsonArr[3],sTmp=JsonTmp.substr(1).substring(0,JsonTmp.length-2).replace(/:\d/g,""),aTmp=sTmp.split(",");sTmp="";for(var i=0;i<JsonArrTitle.Alias.length;i++)sTmp+='"'+aTmp[i]+'":"'+JsonArrTitle.Alias[i]+'",';sTmp="{"+sTmp.substring(0,sTmp.length-1)+"}",sTmp=eval("("+sTmp+")"),JsonArrTitle.Alias=sTmp;var sReg=/^([0-9]\d*\.*\d*)\sto\s([0-9]\d*\.*\d*)\(Adj\)/g,aConCat=[];for(var i in JsonArrData){for(var j=0;j<JsonArrData[i].length;j++){if(JsonArrData[i][j].indexOf(",")>0){var aTmp=JsonArrData[i][j].split(",");JsonArrData[i].splice(j,1);for(var k=0;k<aTmp.length;k++)JsonArrData[i].splice(0,0,aTmp[k])}if(0==JsonArrData[i][j].search(sReg)){var sTmp1=JsonArrData[i][j],aTmp1=[],aTmp2=[];sTmp1=sTmp1.replace("(Adj)",""),aTmp1=sTmp1.split(" to ");for(var l=10*aTmp1[0];l<=10*aTmp1[1];l++)aConCat.push(String(l/10))}}aContCat=aConCat.unique(),"object"==typeof JsonArrData[i]&&(JsonArrData[i]=JsonArrData[i].concat(aContCat),JsonArrData[i]=JsonArrData[i].unique())}for(var i in JsonArrData){for(var aTmp1=[],aTmp2=[],oTmp={},j=0;j<JsonArrData[i].length;j++)isNaN(JsonArrData[i][j])?aTmp1.push(JsonArrData[i][j]):aTmp2.push(JsonArrData[i][j]);oTmp.str=aTmp1,oTmp.num=aTmp2,oTmp.str.sort(function(a,b){return a.localeCompare(b)}),oTmp.num.sort(function(a,b){return a-b}),JsonArrData[i]=oTmp}var Json={};return Json.data=JsonArrData,Json.title=JsonArrTitle,Json.Num=JsonArrNum,Json.type=JsonArrType,Json.bak=JsonArrDataBak,Json}function manyResult(a){return a}module.exports={initResult:initResult,manyResult:manyResult}}),define("WebFilter/ui-screening",["./ui-slider","./data-getKeyWord","./data-ajax","./ui-hoverBgColor","./ui-fixHead","./ui-checkbox","./ui-moreKey"],function(a,b,c){function d(b,c,d){var e=b.title,f=b.data,g=(new Date).getTime(),h=[],i=[],j=[],k=g,l=g,m=[],n=[],o=[],p=[],q=g,r=g,s=g,t=g,u=[];for(var v in f){var w=$('<dl class="zlg-screen-cont clearFix"></dl>'),x=$('<dt class="fl"></dt>'),y=$('<dd class="fl"></dd>');x.attr("title",e.Alias[v]),x.attr("data-name",v),x.html(e.Alias[v]);for(var z in f[v])if("num"==z&&f[v].num.length>0){var A="ZlgRange"+ ++k,B="ZlgSlider"+ ++l,C=$('<div id="'+B+'" class="zlg-slider fl" data-name="'+v+'"></div>'),D=$('<input class="fl" type="text" value=""/>'),E=$('<div id="'+A+'" class="zlg-range fl"></div>'),F=$('<input class="fr" type="text" value=""/>');h.push(A),i.push(B),j.push(f[v].num),C.append(D,E,F),y.prepend(C)}else{var G=f[v][z].length;if(G>0){var A="ZlgBtnsChosen"+ ++q,B="ZlgBtnsData"+ ++r,H="ZlgBtnsSubmit"+ ++s,I="ZlgBtnsSelect"+ ++t;m.push(A),n.push(B),o.push(H),p.push(I);for(var C=$('<div class="zlg-btns fr"></div>'),D=$('<div id="'+A+'" class="zlg-btns-chosen" title="更多筛选参数" data-name="'+v+'"><div>更多筛选参数</div></div>'),E=$('<dl id="'+B+'" class="zlg-btns-data"></dl>'),F=$('<dt class="clearFix"></dt>'),J=$('<input id="'+I+'"  class="fl zlg-chosen-all" type="checkbox">'),K=$('<span class="fl">全选</span>'),L=$('<input id="'+H+'" class="fr" type="button" value="提交" />'),M=$("<dd></dd>"),N=$("<ul></ul>"),O="",P=0;G>P;P++)O+='<li title="'+f[v][z][P]+'"><input type="checkbox">'+f[v][z][P]+"</li>";F.append(J,K,L),N.append(O),M.append(N),E.append(F,M),C.append(D,E),y.append(C)}}w.append(x,y),u.push(w)}for(var Q=[],v=0;v<d.length;v++)for(var z=0;z<u.length;z++){var R=$(u[z]).children(":first").attr("data-name");R==d[v]&&Q.push(u[z])}$("#ZlgScreenMain").append(Q);for(var v=0;v<h.length;v++)a("./ui-slider").ui("#"+h[v],"#"+i[v],j[v],b,c);for(var v=0;v<h.length;v++)a("./ui-checkbox").ui("#"+m[v],"#"+n[v],"#"+o[v],"#"+p[v],b,c);a("./ui-moreKey").ui(b,c)}b.ui=d}),define("WebFilter/ui-slider",["./data-getKeyWord","./data-ajax","./ui-hoverBgColor","./ui-fixHead"],function(a,b,c){function d(b,c,d,e,f){function g(a){if(this.oTimer=setTimeout(function(){m=!0},1500),m){var c=a.val(),e=a.index()?1:0,f=findIndex(d,c)*k;a.val(d[findIndex(d,c)]),$(b).slider("values",e,f)}}var h=d.length,i=0,j=100,k=parseFloat(j/(h-1)),l=[0,100],m=!0;$(c).find("input").bind("blur keydown",function(a){"blur"==a.type?g($(this)):13==a.which&&(g($(this)),m=!1)}),$(b).slider({range:!0,min:i,max:j,step:k,values:l,create:function(){$(c).children(":first").val(d[0]),$(c).children(":last").val(d[d.length-1]),$(c).children(":first").attr("data-initnum",d[0]),$(c).children(":last").attr("data-initnum",d[d.length-1])},slide:function(a,b){var e=d[Math.round(b.values[0]/k)],f=d[Math.round(b.values[1]/k)];$(c).children(":first").val(e),$(c).children(":last").val(f)},change:function(b,c){var d=a("./data-getKeyWord").init(e);d=encodeURI(d),a("./data-ajax").init(f+"?"+d)}})}b.ui=d}),define("WebFilter/ui-checkbox",["./data-getKeyWord","./data-ajax","./ui-hoverBgColor","./ui-fixHead"],function(a,b,c){function d(b,c,d,e,f,g){$(b).click(function(a){var d=$("#ZlgScreenMain").offset().top,e=$("#ZlgToggle").offset().top,f=$(b).offset().top;e-f>f-d?$(c).css("top","-4px"):$(c).css("top",""),$(c).toggle(),a.stopPropagation()}),$(c).click(function(a){a.stopPropagation()}),$(d).click(function(){var d="";$(c).hide(),$(c).find("dd input[type=checkbox]").each(function(){$(this).prop("checked")&&(d+=$(this).parent().attr("title")+",")}),d=d.substring(0,d.length-1),d.length>0?($(b).attr("title",d),$(b).children().html(d),$(b).children().addClass("chosen-filter-color")):($(b).attr("title","更多筛选参数"),$(b).children().html("更多筛选参数"),$(b).children().removeClass("chosen-filter-color"));var e=a("./data-getKeyWord").init(f);e=encodeURI(e),a("./data-ajax").init(g+"?"+e)}),$("body").click(function(){"block"==$(c).css("display")&&$(c).hide()}),$(e).click(function(){$(this).prop("checked")?($(this).next("span").html("反选"),$(c).find("dd input[type=checkbox]").prop({checked:!0})):($(this).next("span").html("全选"),$(c).find("dd input[type=checkbox]").prop({checked:!1}))})}b.ui=d}),define("WebFilter/ui-moreKey",["./data-getKeyWord","./data-ajax","./ui-hoverBgColor","./ui-fixHead"],function(a,b,c){function d(b,c){var d=4;$(".zlg-screen-cont").each(function(){if($(this).find("dd:first").children().size()<2&&$(this).find("dd:first").find(".zlg-btns").size()>0){for(var a=$('<div class="zlg-more-btns fl" data-name="'+$(this).find("dt:first").attr("data-name")+'"></div>'),b=$('<ul class="clearFix"></ul'),c=null,e=0;d>e;e++)c=$(this).find("dd:first").find(".zlg-btns .zlg-btns-data ul:first").children(":first").clone(),$(this).find("dd:first").find(".zlg-btns .zlg-btns-data ul:first").children(":first").remove(),b.append(c);a.append(b),$(this).find("dd:first").prepend(a)}}),$(".zlg-btns-data").each(function(a){0==$(this).find("dd ul li").size()&&$(this).parent().remove()}),$(".zlg-more-btns input:checkbox").click(function(){var d=a("./data-getKeyWord").init(b);d=encodeURI(d),a("./data-ajax").init(c+"?"+d)})}b.ui=d}),define("WebFilter/ui-toggle",[],function(a,b,c){function d(){var a=$("#ZlgScreenMain").children().size(),b=$("#ZlgScreenMain").height(),c=($("#ZlgScreenMain").children(":first-child").outerHeight(!0)+1)*a;$("#ZlgToggle").click(function(){"show"==$(this).attr("data-toggle")?($(this).attr("data-toggle","hide").text("收起部分选项"),$("#ZlgScreenMain").animate({height:c+"px"})):($(this).attr("data-toggle","show").text("显示全部选项"),$("#ZlgScreenMain").animate({height:b+"px"}))})}b.ui=d}),define("WebFilter/ui-reset",["./data-ajax","./ui-hoverBgColor","./ui-fixHead"],function(a,b,c){function d(b,c){$(b).click(function(){$(".zlg-slider").each(function(){$(this).children(":first").val($(this).children(":first").attr("data-initnum")),$(this).children(":last").val($(this).children(":last").attr("data-initnum"))}),$(".zlg-range").each(function(){$(this).children(":first").css({left:"0%",width:"100%"}),$(this).children(":eq(1)").css({left:"0%"}),$(this).children(":last").css({left:"100%"})}),$(".zlg-btns-data").each(function(){$(this).find(":checkbox").prop({checked:!1})}),$(".zlg-more-btns").each(function(){$(this).find(":checkbox").prop({checked:!1})}),$(".zlg-btns-chosen").each(function(){$(this).attr("title","更多筛选参数"),$(this).children().html("更多筛选参数"),$(this).children().removeClass("chosen-filter-color")}),a("./data-ajax").init(c)})}b.init=d}),define("WebFilter/data-getKeyWord",[],{init:function(a){var b="",c=/^([0-9]\d*\.*\d*)\sto\s([0-9]\d*\.*\d*)\(Adj\)/g,d=a.data,e=a.bak,f={};$(".zlg-btns-chosen").each(function(){var a=[],b=$(this).attr("title");b="更多筛选参数"==b?"":b,a=b.split(","),1==a.length&&""==a[0]||(f[$(this).attr("data-name")]=a)}),$(".zlg-more-btns").each(function(){{var a=[];$(this).attr("title")}$(this).find(":checkbox").each(function(){$(this).prop("checked")&&a.push($(this).parent().attr("title"))}),a.length>0&&(f[$(this).attr("data-name")]=a)}),$(".zlg-slider").each(function(){var a=$(this).find("input:first").val(),b=$(this).find("input:last").val(),g=$(this).find("input:first").attr("data-initnum"),h=$(this).find("input:last").attr("data-initnum"),i=!1;if(i=a-g>0?!0:0>b-h?!0:!1){var j=[],k=[],l=[],m=$(this).attr("data-name"),n=[];l=l.concat(d[m].num),j.push($(this).find("input:first").val()),j.push($(this).find("input:last").val()),k.push(findIndex(l,j[0])),k.push(findIndex(l,j[1])),l.splice(0,k[0]),l.splice(k[1]+1-k[0],l.length),n=n.concat(l);for(var o=0;o<d[m].str.length;o++)if(0==d[m].str[o].search(c)){var p=[],q=d[m].str[o],r=q.replace("(Adj)","");p=r.split(" to ");for(var s=0;s<l.length;s++)l[s]-p[0]>=0&&l[s]-p[1]<=0&&(l[s]=q)}l=l.unique(),n=n.concat(l);for(var t=[],o=0;o<e[m].length;o++)for(var s=0;s<n.length;s++)e[m][o]==n[s]&&t.push(e[m][o]);f[m]||(f[m]=[]),f[m]=f[m].concat(t),f[m]=f[m].unique()}});var g=["+","&","'","%","^","?","(",")","<",">","[","]","{","}","/","\\",";",":","--"],h=["加","与","单引号","余","位","问号","左括号","右括号","小于","大于","中左括号","中右括号","大左括号","大右括号","斜杠","反斜杠","分号","冒号","双横杆"];for(var i in f){for(var j="",k=0;k<f[i].length;k++)j+="$"+f[i][k]+"$";j=i+"="+j,b+=j+" AND "}for(var i=0;i<g.length;i++){var l=new RegExp("\\"+g[i],"g");b=b.replace(l,h[i])}return b=b.substring(0,b.length-5),b="tName="+a.title.TableName+"&filter="+b+"&IsAjax=true&Labels=商品综合信息列表Table"}}),define("WebFilter/data-ajax",["./ui-hoverBgColor","./ui-fixHead"],function(a,b,c){function d(b){$.ajax({async:!0,context:document.body,url:b,beforeSend:function(){var a=$('<div id="ZlgLoading2" class="zlg-loading"></div>');$("#ZlgResult").html(a)},error:function(){alert("╮(╯﹏╰)╭网络故障,数据请求失败！")},success:function(b){$("#ZlgLoading2").remove();var b=$(b),c=b.children().children().size()-1,d=[];b.children().children(":first").children().each(function(a){var b=$(this).parent().siblings(),e=0;b.each(function(){var b=$(this).children().eq(a).text(),c=/[\n\r]/g;"0"==b||"-"==b||" "==b||""==b?e++:"-1"!=b.search(c)&&e++}),e==c&&d.push(a)}),$(d).each(function(a){b.children(":first").children().each(function(){$(this).children().each(function(b){d[a]-a==b&&$(this).remove()})})}),$("#ZlgResult").html(b),a("./ui-hoverBgColor").init("#SelectTable","td-hover-bg"),a("./ui-fixHead").init("#SelectTable",!0)}})}b.init=d}),define("WebFilter/ui-fixHead",[],function(a,b,c){function d(a,b){if(0!=$(a).size()){var c=$(a).find("tr:first"),d=$('<table id="FixTop"></table>'),e=$('<table id="FixLeft"></table>'),f=$('<table id="FixTopLeft"></table>');c.children().each(-1!==window.navigator.userAgent.indexOf("Chrome")?function(){var a=$(this).width()+1;$(this).css({"min-width":a,"max-width":a})}:"Microsoft Internet Explorer"==navigator.appName&&"8."==navigator.appVersion.match(/8./i)?function(){var a=$(this).width()+1;$(this).css({"min-width":a,"max-width":a})}:function(){var a=$(this).width();$(this).css({"min-width":a,"max-width":a})}),$(a).find("tr:eq(1)").children().each(function(){var a=$(this).width();$(this).css({"min-width":a,"max-width":a})}),d.css({position:"absolute",top:"0px",left:"0px","z-index":"1"});var g=c.clone();if(d.html(g),$("#ZlgResult").append(d),b){e.css({position:"absolute",top:"0px",left:"0px","z-index":"0"}),f.css({position:"absolute",top:"0px",left:"0px","z-index":"1"});for(var h=0;h<$(a).find("tr").size();h++){var i=$("<tr></tr>"),j=$(a).find("tr").eq(h).children().eq(0).clone();i.html(j),$(e).append(i)}f.append($("<tr></tr>").html($(a).find("tr:first").children().eq(0).clone())),$("#ZlgResult").append(e,f)}$(window,document).scroll(function(){if(0!=$(a).size()){var b={T:$(this).scrollTop(),L:$(this).scrollLeft()},c={T:$(a).offset().top,L:$(a).offset().left};b.T>c.T&&b.L<=c.L&&(d.css({top:0,position:"fixed"}),e.css({top:0,position:"absolute"}),f.css({top:0,position:"fixed"}),d.css({left:c.L-b.L+"px"}),e.css({left:0}),f.css({left:c.L-b.L+"px"})),b.L>c.L&&b.L>c.L&&(d.css({top:0,position:"fixed"}),e.css({top:c.T-b.T+"px",position:"fixed"}),f.css({top:0,position:"fixed"}),d.css({left:c.L-b.L+"px"}),e.css({left:0}),f.css({left:0})),b.T<=c.T&&b.L<=c.L&&(d.css({top:0,position:"absolute"}),e.css({top:0,position:"absolute"}),f.css({top:0,position:"absolute"}),d.css({left:0,position:"absolute"}),e.css({left:0,position:"absolute"}),f.css({left:0,position:"absolute"})),b.T<=c.T&&b.L>c.L&&(d.css({top:0,position:"absolute"}),e.css({top:c.T-b.T+"px",position:"fixed"}),f.css({top:c.T-b.T+"px",position:"fixed"}),d.css({left:0}),e.css({left:0}),f.css({left:0}))}})}}b.init=d}),define("WebFilter/ui-hoverBgColor",[],function(a,b,c){function d(a,b){var c=0;$(a).find("td").hover(function(){c=$(this).index(),$(this).siblings().addClass(b),$(a).find("tr").each(function(){$(this).find("td").eq(c).addClass(b)})},function(){$(this).siblings().removeClass(b),$(a).find("tr").each(function(){$(this).find("td").eq(c).removeClass(b)})})}b.init=d});